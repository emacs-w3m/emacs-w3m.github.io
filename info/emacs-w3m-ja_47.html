<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Copyright C 2000-2014 TSUCHIYA Masatoshi

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU General Public License, Version 2 or any
later version published by the Free Software Foundation.

この文書を、フリーソフトウェア財団によって発行された GNU 一般公衆利用許
諾契約書第 2 版またはそれ以降の版のうちどれかの定める条件の下で複製、配
布、あるいは変更することを許可します。

This document is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

この文書は有用であることを願って頒布されますが、全くの無保証 です。
商業可能性 の保証や 特定の目的への適合性 は、言外に示され
たものも含め全く存在しません。詳しくは GNU 一般公衆利用許諾契約書をご覧
ください。

You should have received a copy of the GNU General Public License along
with this document; see the file COPYING.  If not, write to the Free
Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
02110-1301, USA.

あなたはこの文書と共に、GNU 一般公衆利用許諾契約書の複製物を一部受け取っ
たはずです。COPYING ファイルを参照してください。もし受け取っていなければ、
フリーソフトウェア財団まで請求してください (宛先は the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA)。

 -->
<!-- Created on 2019å¹´1ææ30æ¥ by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Emacs-w3m &ndash; an Emacs interface to w3m &ndash;: 6.1 Gnus で HTML メールを読む</title>

<meta name="description" content="Emacs-w3m &ndash; an Emacs interface to w3m &ndash;: 6.1 Gnus で HTML メールを読む">
<meta name="keywords" content="Emacs-w3m &ndash; an Emacs interface to w3m &ndash;: 6.1 Gnus で HTML メールを読む">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="ja" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Gnus"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="emacs-w3m-ja_46.html#Hooking-into-MUAs" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_48.html#Mew" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_46.html#Hooking-into-MUAs" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_46.html#Hooking-into-MUAs" title="Up section">ä¸</a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_51.html#Frequently-Asked-Questions" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja.html#Top" title="Cover (top) of document">åé ­</a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_toc.html#SEC_Contents" title="Table of contents">ç®æ¬¡</a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_68.html#Index" title="è¦åºã">è¦åºã</a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Gnus-de-HTML-meruwoDu-mu"></a>
<h2 class="section">6.1 Gnus で HTML メールを読む</h2>
<a name="index-Reading-HTML-mails-in-Gnus"></a>
<a name="index-shr"></a>
<a name="index-gnus_002dw3m"></a>
<a name="index-mm_002dshr"></a>
<a name="index-gnus_002darticle_002dhtml"></a>
<a name="index-mm_002dinline_002dtext_002dhtml_002dwith_002dimages"></a>
<a name="index-mm_002dinline_002dtext_002dhtml_002dwith_002dw3m_002dkeymap"></a>
<a name="index-mm_002dtext_002dhtml_002drenderer"></a>
<a name="index-w3m_002dminor_002dmode"></a>
<a name="index-w3m_002dminor_002dmode_002dcommand_002dalist"></a>

<p>第一に、もしユーザオプション <code>mm-text-html-renderer</code> がデフォルト
で <code>shr</code> または <code>gnus-w3m</code> になっているのであれば (つまり関
数 <code>mm-shr</code> または <code>gnus-article-html</code> が利用できるのであれば)、
そして Gnus の内蔵の <acronym>HTML</acronym> 描画器であるその関数に満足しているの
であれば、何もする必要は無いでしょう。See <a href="../emacs-mime-ja/Display-Customization.html#Display-Customization">(emacs-mime-ja)Display Customization</a> section &lsquo;表示 のカスタマイズ&rsquo; in <cite>The Emacs MIME Manual</cite>.  さら
に See <a href="../gnus-ja/HTML.html#HTML">(gnus-ja)HTML</a> section &lsquo;HTML&rsquo; in <cite>The Gnus Manual</cite>.
</p>
<p>しかし、もしお使いの Gnus が少し古くて <code>mm-shr</code> 関数
や <code>gnus-article-html</code> 関数が使えないか、または <acronym>HTML</acronym> 記事
の描画のために emacs-w3m を試してみたいのであれば、この章はまさにあなた
のためのものです。
</p>
<ul>
<li>
Emacs-w3m で何ができるの?

<p>HTML の spam メールを、emacs-w3m を使って人間が読めるように変換すること
ができます。もちろん HTML の ham メール (spam ではないメール) に対しても
働き、どちらの場合でも emacs-w3m はデフォルトの変換器よりもたぶん速いで
しょう。追加の操作は必要ありません。それは単に表示されます。
</p>
<p>記事バッファの HTML の部分では <code>w3m-minor-mode</code> が on になって、
emacs-w3m のと同じ主要なキーを使うことができます。例え
ば <kbd>&lt;RET&gt;</kbd> は、現在位置のリンクが指し示すページに行きます。それ
らのキーは変数 <code>w3m-minor-mode-command-alist</code> で定義されています。
保安上の理由から、いくつかのコマンドはそれに似た別のコマンドで置き換えら
れていることを心に留めておいてください (下記参照)。
</p>
</li><li>
何をしなければいけないの?

<p>この行を &lsquo;<tt>~/.gnus.el</tt>&rsquo; ファイルに追加してください。
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(setq mm-text-html-renderer 'w3m)
</pre></td></tr></table>

<p>さらに、記事バッファで画像を表示したい場合は、以下の行を入れてください。
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(setq mm-inline-text-html-with-images t)
</pre></td></tr></table>

<p>記事バッファで emacs-w3m のキーを使う必要が無いならば、以下の行も追加し
てください:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(setq mm-inline-text-html-with-w3m-keymap nil)
</pre></td></tr></table>

</li><li>
ご注意

<p>前に spam と ham のことを書いたのはふざけているわけではなくて、あなたの
注意を喚起するためにまさにここにあるのです。HTML メールに
は &lsquo;<samp>&lt;img&gt;</samp>&rsquo; タグを使った spammers (spam をばらまくやから) の卑劣な悪
巧みが含まれているかもしれません。それは &lsquo;<samp>Click Here!</samp>&rsquo; ボタンよりは
るかに有害です。最もありそうなのは、そんなたちの悪い spam があなたの目に
止まったかどうかを検査する、すなわちこの場合、あなたのメールアドレスが有
効であることを確認するための spammer の意図があることです。それは、画像
を表示するときに自動的に取得しに行くであろう URL に、識別文字列を埋め込
むことによって行なわれます。変数 <code>mm-w3m-safe-url-regexp</code> がデフォ
ルト値から変更されていなければ、Gnus が勝手に spammer のサイトに接続する
ことはありません。
</p>
<p><code>mm-inline-text-html-with-images</code> を <code>t</code> にすれば、記事バッファ
にインライン画像を表示することができますよね?  いいえ、断じて違います。
あなたはまだ守られているのです。あなたのメールアドレスが到達可能だという
事実が漏れることを気にしないのであれば、変
数 <code>mm-w3m-safe-url-regexp</code> を <code>nil</code> にしてください。
<code>mm-w3m-safe-url-regexp</code> のデフォルト値は &lsquo;<samp>&quot;\\`cid:&quot;</samp>&rsquo; で、これ
は私たちが &lsquo;<samp>cid:</samp>&rsquo; URL によってメールに含まれている画像が安全だと考
えていることを意味します (すなわち、<code>mm-w3m-safe-url-regexp</code> を変更
しなくても、そのような画像は表示することができます)。
</p>
</li><li>
おまけ

<p>概略バッファにいるときでも、記事バッファの画像表示をトグルに切り換えるこ
とができます。それらの画像が emacs-w3m によって表示される場合だけですけ
れどね。例です:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(defun gnus-summary-w3m-safe-toggle-inline-images (&amp;optional arg)
  &quot;Toggle displaying of all images in the article buffer.
If the prefix arg is given, force displaying of images.&quot;
  (interactive &quot;P&quot;)
  (with-current-buffer gnus-article-buffer
    (let ((st (point-min))
          (nd (point-max))
          (w3m-async-exec w3m-async-exec))
      (save-restriction
        (widen)
        (if (or (&gt; st (point-min)) (&lt; nd (point-max)))
            (setq w3m-async-exec nil))
        (article-goto-body)
        (goto-char (or (text-property-not-all (point) (point-max)
                                              'w3m-safe-url-regexp nil)
                       (point)))
        (if (interactive-p)
            (call-interactively 'w3m-toggle-inline-images)
          (w3m-toggle-inline-images arg))))))

(eval-after-load &quot;gnus-sum&quot;
  '(define-key gnus-summary-mode-map
     &quot;vi&quot; 'gnus-summary-w3m-safe-toggle-inline-images))
</pre></td></tr></table>

<p>キー <kbd>vi</kbd> は他の何かに変更することができます。さら
に See <a href="../gnus-ja/Summary-Buffer.html#Summary-Buffer">(gnus-ja)Summary Buffer</a> section &lsquo;概略バッファー&rsquo; in <cite>The Gnus Manual</cite>.
</p></li></ul>

<p><a href="emacs-w3m-ja_57.html#Nnshimbun">Gnus をウェブブラウザにする!</a> も参照してください。
</p>
<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="emacs-w3m-ja_46.html#Hooking-into-MUAs" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_48.html#Mew" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_46.html#Hooking-into-MUAs" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_46.html#Hooking-into-MUAs" title="Up section">ä¸</a>]</td>
<td valign="middle" align="left">[<a href="emacs-w3m-ja_51.html#Frequently-Asked-Questions" title="Next chapter"> &gt;&gt; </a>]</td>
</tr></table>
<p>
 <font size="-1">
  ãã®ææ¸ã¯<em>TSUCHIYA Masatoshi</em>ã«ãã£ã¦<em>2019å¹´1ææ30æ¥</em>ã«<a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>ãç¨ãã¦çæããã¾ããã
 </font>
 <br>

</p>
</body>
</html>
